<% layout('layouts/boilerplate')%>

<!-- Search Campgrounds -->
<div class="search">
  <form action="/campgrounds" method="GET">
    <!-- onkeyup="searchFun()" -->
         <input type="search" id="searchBar" name="search" class="form-control mr-sm-2" placeholder="Search Campgrounds" required>
       
  </form>
</div>  

<div id="cluster-map"></div>
<div class="container">
    <h1>All Campgrounds</h1>              
             
              
              <div class="row">
                <% for (let campground of campgrounds) { %>
                     <div class="col-md-4">
                          <%if( campground.images.length)  { %>
                            <img class="img-fluid" alt="" src="<%= campground.images[0].url%>">
                            <%} else {%>
                              <img class="img-fluid" src="https://res.cloudinary.com/yelpcamp-images/image/upload/v1616791917/YelpCamp/z7sbgtuh35byqchrnupd.jpg" alt="">
                              <% } %>
                            <div class="card-body">
                                <h5 class="card-title"><%= campground.title%></h5>
                                
                                <p class="card-text"><%= campground.description%></p>    
                                <!-- <p class="card-text">
                                    <small class="text-muted"><%= campground.location%></small>
                                </p>  -->
                                <a class="btn btn-primary" href="/campgrounds/<%=campground.id%>">View <%=campground.title%></a>                 
                                
                            </div>
                    </div>                  

                  
          
                <% } %>
              </div>
        
</div>

    
            
</div>
        <!-- <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-end">
              <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
              </li>
              <li class="page-item"><a class="page-link" href="#">1</a></li>
              <li class="page-item"><a class="page-link" href="#">2</a></li>
              <li class="page-item"><a class="page-link" href="#">3</a></li>
              <li class="page-item">
                <a class="page-link" href="#">Next</a>
              </li>
            </ul>
          </nav> -->

          <script>
            const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
            const campgrounds = { features: <%- JSON.stringify(campgrounds) %> } ;
        </script>
<script src="/javascripts/clusterMap.js"></script>
